{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/components/WebBrokus.vue?252c","webpack:///./src/App.vue","webpack:///./src/components/WebBrokus.vue","webpack:///./src/components/BlockPreview.vue","webpack:///./src/components/BlockPreview.vue?b310","webpack:///./src/components/WebBrokus.vue?b56f","webpack:///./src/App.vue?dfb6","webpack:///./src/main.js","webpack:///./src/App.vue?3f7e","webpack:///./src/components/BlockPreview.vue?7ba0","webpack:///./src/assets/logo.png"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","alt","src","href","class","type","resetGame","players","player","playerIdx","activePlayerIdx","blockOptions","block","idx","selected","selectedBlockOption","color","previewClicked","rotate","randomTry","pass","computedBoard","v","cellClass","style","cellStyle","tryPlace","previewPiece","$emit","board","boardSize","Empty","Occupied","props","Boolean","String","setup","Array","updateBoard","y","x","shape","xi","yi","rotation","Math","floor","render","shapes","OccupiedMask","Candidate","Preview","isOccupied","cell","getCellOccupiedPlayer","map","origin","this","components","BlockPreview","preview","blocks","forEach","shiftCell","rotateCell","isPlaceable","offset","ret","pos","allow","deny","allowed","dy","yj","dx","xj","ridge","console","log","neighbors","anyPlaceable","neighbor","candidates","filter","item","tryCount","choice","random","chosenCell","cx","cy","pieceChoice","cellIdx","cellOffset","activePlayer","__scopeId","WebBrokus","createApp","App","mount"],"mappings":"aACE,SAASA,EAAqBC,GAQ7B,IAPA,IAMIC,EAAUC,EANVC,EAAWH,EAAK,GAChBI,EAAcJ,EAAK,GACnBK,EAAiBL,EAAK,GAIHM,EAAI,EAAGC,EAAW,GACpCD,EAAIH,EAASK,OAAQF,IACzBJ,EAAUC,EAASG,GAChBG,OAAOC,UAAUC,eAAeC,KAAKC,EAAiBX,IAAYW,EAAgBX,IACpFK,EAASO,KAAKD,EAAgBX,GAAS,IAExCW,EAAgBX,GAAW,EAE5B,IAAID,KAAYG,EACZK,OAAOC,UAAUC,eAAeC,KAAKR,EAAaH,KACpDc,EAAQd,GAAYG,EAAYH,IAG/Be,GAAqBA,EAAoBhB,GAE5C,MAAMO,EAASC,OACdD,EAASU,OAATV,GAOD,OAHAW,EAAgBJ,KAAKK,MAAMD,EAAiBb,GAAkB,IAGvDe,IAER,SAASA,IAER,IADA,IAAIC,EACIf,EAAI,EAAGA,EAAIY,EAAgBV,OAAQF,IAAK,CAG/C,IAFA,IAAIgB,EAAiBJ,EAAgBZ,GACjCiB,GAAY,EACRC,EAAI,EAAGA,EAAIF,EAAed,OAAQgB,IAAK,CAC9C,IAAIC,EAAQH,EAAeE,GACG,IAA3BX,EAAgBY,KAAcF,GAAY,GAE3CA,IACFL,EAAgBQ,OAAOpB,IAAK,GAC5Be,EAASM,EAAoBA,EAAoBC,EAAIN,EAAe,KAItE,OAAOD,EAIR,IAAIQ,EAAmB,GAKnBhB,EAAkB,CACrB,IAAO,GAGJK,EAAkB,GAGtB,SAASS,EAAoB1B,GAG5B,GAAG4B,EAAiB5B,GACnB,OAAO4B,EAAiB5B,GAAU6B,QAGnC,IAAIC,EAASF,EAAiB5B,GAAY,CACzCK,EAAGL,EACH+B,GAAG,EACHF,QAAS,IAUV,OANAf,EAAQd,GAAUW,KAAKmB,EAAOD,QAASC,EAAQA,EAAOD,QAASH,GAG/DI,EAAOC,GAAI,EAGJD,EAAOD,QAKfH,EAAoBM,EAAIlB,EAGxBY,EAAoBO,EAAIL,EAGxBF,EAAoBQ,EAAI,SAASL,EAASM,EAAMC,GAC3CV,EAAoBW,EAAER,EAASM,IAClC3B,OAAO8B,eAAeT,EAASM,EAAM,CAAEI,YAAY,EAAMC,IAAKJ,KAKhEV,EAAoBe,EAAI,SAASZ,GACX,qBAAXa,QAA0BA,OAAOC,aAC1CnC,OAAO8B,eAAeT,EAASa,OAAOC,YAAa,CAAEC,MAAO,WAE7DpC,OAAO8B,eAAeT,EAAS,aAAc,CAAEe,OAAO,KAQvDlB,EAAoBmB,EAAI,SAASD,EAAOE,GAEvC,GADU,EAAPA,IAAUF,EAAQlB,EAAoBkB,IAC/B,EAAPE,EAAU,OAAOF,EACpB,GAAW,EAAPE,GAA8B,kBAAVF,GAAsBA,GAASA,EAAMG,WAAY,OAAOH,EAChF,IAAII,EAAKxC,OAAOyC,OAAO,MAGvB,GAFAvB,EAAoBe,EAAEO,GACtBxC,OAAO8B,eAAeU,EAAI,UAAW,CAAET,YAAY,EAAMK,MAAOA,IACtD,EAAPE,GAA4B,iBAATF,EAAmB,IAAI,IAAIM,KAAON,EAAOlB,EAAoBQ,EAAEc,EAAIE,EAAK,SAASA,GAAO,OAAON,EAAMM,IAAQC,KAAK,KAAMD,IAC9I,OAAOF,GAIRtB,EAAoB0B,EAAI,SAAStB,GAChC,IAAIM,EAASN,GAAUA,EAAOiB,WAC7B,WAAwB,OAAOjB,EAAO,YACtC,WAA8B,OAAOA,GAEtC,OADAJ,EAAoBQ,EAAEE,EAAQ,IAAKA,GAC5BA,GAIRV,EAAoBW,EAAI,SAASgB,EAAQC,GAAY,OAAO9C,OAAOC,UAAUC,eAAeC,KAAK0C,EAAQC,IAGzG5B,EAAoB6B,EAAI,GAExB,IAAIC,EAAaC,OAAO,gBAAkBA,OAAO,iBAAmB,GAChEC,EAAmBF,EAAW3C,KAAKsC,KAAKK,GAC5CA,EAAW3C,KAAOf,EAClB0D,EAAaA,EAAWG,QACxB,IAAI,IAAItD,EAAI,EAAGA,EAAImD,EAAWjD,OAAQF,IAAKP,EAAqB0D,EAAWnD,IAC3E,IAAIU,EAAsB2C,EAI1BzC,EAAgBJ,KAAK,CAAC,EAAE,kBAEjBM,K,2ECvJT,W,0HCCE,eAA4C,OAAvCyC,IAAI,WAAWC,IAAA,K,WAEpB,eAAI,mB,iBAAA,gB,EACO,eAA0C,KAAvCC,KAAK,yBAAwB,UAAM,G,+GAHjD,EACA,eAAa,GACb,E,EACW,G,iGCWNC,MAAM,S,GACJA,MAAM,c,yIAfb,eAEM,YADJ,eAA2D,SAApDC,KAAK,SAAU,QAAK,8BAAE,EAAAC,UAAA,qBAAWrB,MAAM,kB,mBAEhD,eAKM,2BAL6B,EAAAsB,SAAO,SAA7BC,EAAQC,G,wBAArB,eAKM,OALuClB,IAAKkB,EAAYL,MAAK,yBAAgCK,IAAc,EAAAC,kB,gBAAkB,WAC1H,eAAED,EAAS,GAAI,YACtB,I,mBAAA,eAEwC,2BAFHD,EAAOG,cAAY,SAAlCC,EAAOC,G,wBAA7B,eAEwC,GAFmBtB,IAAKsB,EAAMD,MAAOA,EAC1EE,SAAUN,EAAOO,sBAAwBF,EAAMG,MAAOR,EAAOQ,MAC7D,QAAK,mBAAE,EAAAC,eAAeT,EAAQK,K,qEAEnC,eAIM,YAHJ,eAAoD,SAA7CR,KAAK,SAAU,QAAK,8BAAE,EAAAa,OAAA,qBAAQjC,MAAM,WAC3C,eAA2D,SAApDoB,KAAK,SAAU,QAAK,8BAAE,EAAAc,UAAA,qBAAWlC,MAAM,eAC9C,eAAgD,SAAzCoB,KAAK,SAAU,QAAK,8BAAE,EAAAe,KAAA,qBAAMnC,MAAM,WAE3C,eAQM,MARN,EAQM,CAPJ,eAMM,MANN,EAMM,E,mBALJ,eAIM,2BAJgB,EAAAoC,eAAa,SAAtBC,EAAG5E,G,wBAAhB,eAIM,OAJgC6C,IAAK7C,GAAC,CAC1C,eAEM,OAFA0D,MAAK,yBAAkB,EAAAmB,UAAUD,EAAG5E,IAAM8E,MAAO,EAAAC,UAAUH,EAAG5E,GAAK,QAAK,mBAAE,EAAAgF,SAAShF,IACtF,aAAU,mBAAE,EAAAiF,aAAajF,K,qOClBlC,eAIM,OAJA0D,MAAK,+BAA4B,EAAAU,UAAY,QAAK,+BAAE,EAAAc,MAAK,Y,qBAC7D,eAEM,2BAFgB,EAAAC,OAAK,SAAdP,EAAG5E,G,wBAAhB,eAEM,OAFwB6C,IAAK7C,EACjC0D,MAAM,OAAQoB,MAAO,EAAAC,UAAUH,EAAG5E,I,qBAOxC,IAAMoF,EAAY,EAEZC,EAAQ,EACRC,EAAW,EAGF,GACbxD,KAAM,eACNyD,MAAO,CACLrB,MAAO/D,OACPiE,SAAUoB,QACVlB,MAAOmB,QAGTC,MARa,SAQPH,GACJ,IAAIJ,EAAQ,eAAS,IAAIQ,MAAMP,EAAYA,IAY3C,SAASQ,IACP,IAAI,IAAIC,EAAI,EAAGA,EAAIT,EAAWS,IAC5B,IAAI,IAAIC,EAAI,EAAGA,EAAIV,EAAWU,IAC5BX,EAAMW,EAAID,EAAIT,GAAaC,EAHV,uBAODE,EAAMrB,MAAM6B,OAPX,IAOrB,2BAAsC,iCAA7BC,EAA6B,KAAzBC,EAAyB,KACpC,OAAOV,EAAMrB,MAAMgC,UACjB,KAAK,EAAG,MACR,KAAK,EAAL,MAAmB,CAACD,EAAIb,EAAYY,EAAK,GAAhCA,EAAT,KAAaC,EAAb,KAA6C,MAC7C,KAAK,EAAL,MAAmB,CAACb,EAAYY,EAAK,EAAGZ,EAAYa,EAAK,GAAhDD,EAAT,KAAaC,EAAb,KAA6D,MAC7D,KAAK,EAAL,MAAmB,CAACb,EAAYa,EAAK,EAAGD,GAA/BA,EAAT,KAAaC,EAAb,KAA6C,MAE5CD,EAAK,GAAKZ,GAAaY,GAAMC,EAAK,GAAKb,GAAaa,IAEvDd,EAAMa,EAAKC,EAAKb,GAAaE,IAhBV,+BAoBvB,SAASP,EAAUH,EAAG5E,GACpB,0CACIA,EAAIoF,EAAY,EADpB,oBAC6D,EAA5Be,KAAKC,MAAMpG,EAAIoF,GADhD,gCAEU,IAANR,EAAUW,EAAMjB,MAAc,IAANM,EAAU,UAAY,SAKpD,OAFA,eAAYgB,GAEL,CACLT,QACAJ,e,UC9DN,EAAOsB,OAAS,EAED,QFsBT,EAAY,GACZC,EAAS,CACb,CAAC,CAAC,EAAE,IACJ,CAAC,CAAC,EAAE,GAAI,CAAC,EAAE,IACX,CAAC,CAAC,EAAE,GAAI,CAAC,EAAE,IACX,CAAC,CAAC,EAAE,GAAI,CAAC,EAAE,GAAI,CAAC,EAAE,IAClB,CAAC,CAAC,EAAE,GAAI,CAAC,EAAE,GAAI,CAAC,EAAE,IAClB,CAAC,CAAC,EAAE,GAAI,CAAC,EAAE,GAAI,CAAC,EAAE,IAClB,CAAC,CAAC,EAAE,GAAI,CAAC,EAAE,GAAI,CAAC,EAAE,GAAI,CAAC,EAAE,IACzB,CAAC,CAAC,EAAE,GAAI,CAAC,EAAE,GAAI,CAAC,EAAE,GAAI,CAAC,EAAE,IACzB,CAAC,CAAC,EAAE,GAAI,CAAC,EAAE,GAAI,CAAC,EAAE,GAAI,CAAC,EAAE,IACzB,CAAC,CAAC,EAAE,GAAI,CAAC,EAAE,GAAI,CAAC,EAAE,GAAI,CAAC,EAAE,IACzB,CAAC,CAAC,EAAE,GAAI,CAAC,EAAE,GAAI,CAAC,EAAE,GAAI,CAAC,EAAE,IACzB,CAAC,CAAC,EAAE,GAAI,CAAC,EAAE,GAAI,CAAC,EAAE,GAAI,CAAC,EAAE,IACzB,CAAC,CAAC,EAAE,GAAI,CAAC,EAAE,GAAI,CAAC,EAAE,GAAI,CAAC,EAAE,GAAI,CAAC,EAAE,IAChC,CAAC,CAAC,EAAE,GAAI,CAAC,EAAE,GAAI,CAAC,EAAE,GAAI,CAAC,EAAE,GAAI,CAAC,EAAE,IAChC,CAAC,CAAC,EAAE,GAAI,CAAC,EAAE,GAAI,CAAC,EAAE,GAAI,CAAC,EAAE,GAAI,CAAC,EAAE,IAChC,CAAC,CAAC,EAAE,GAAI,CAAC,EAAE,GAAI,CAAC,EAAE,GAAI,CAAC,EAAE,GAAI,CAAC,EAAE,KAG5B,EAAQ,EACR,EAAW,EACXC,EAAe,EACfC,EAAY,EACZC,EAAU,GAEhB,SAASC,EAAWC,GAClB,OAAOA,EAAO,EAIhB,SAASC,EAAsBD,GAC7B,IAAID,EAAWC,GACb,KAAM,4BACR,OAAOA,EAAOJ,E,IAGV,EAIJ,WAAYjC,GAAM,oDAHT,IAGS,mCAFH,eAASgC,EAAOO,KAAI,SAAAd,GAAI,MAAM,CAACe,OAAQ,CAAC,EAAG,GAAIZ,SAAU,EAAGH,cAEzD,0CADI,eAAI,IAExBgB,KAAKzC,MAAQA,GAIF,GACbxC,KAAM,YACNkF,WAAY,CAAEC,gBAEdvB,MAJa,WAKX,IAAIP,EAAQ,eAAS,IAAIQ,MAAM,EAAY,IACvC9B,EAAU,eAAS,CAAC,UAAW,UAAW,UAAW,WAAWgD,KAAI,SAAAvC,GAAI,OAAK,IAAI,EAAOA,OACxFN,EAAkB,eAAI,GACtBkD,EAAU,eAAI,MAYlB,SAAStD,IAAY,uBACDC,GADC,yBACXC,EADW,QAEjBA,EAAOqD,OAAOjH,OAAS,EACvB4D,EAAOG,aAAa/D,OAAS,EAC7BoG,EAAOc,SAAQ,SAAArB,GAAI,OAAKjC,EAAOG,aAAazD,KAAK,CAACsG,OAAQ,CAAC,EAAG,GAAIZ,SAAU,EAAGH,aAC/EjC,EAAOO,oBAAsB,GAJ/B,2BAA0B,IADP,8BAOnBuB,IAGF,SAASA,IACP,IAAI,IAAIC,EAAI,EAAGA,EAAI,EAAWA,IAC5B,IAAI,IAAIC,EAAI,EAAGA,EAAI,EAAWA,IAC5BX,EAAMW,EAAID,EAAI,GAAa,EAI/BhC,EAAQuD,SAAQ,SAACtD,EAAQC,GAAc,uBACpBD,EAAOqD,QADa,IACrC,2BAA+B,OAAvBjD,EAAuB,yBACTA,EAAM6B,OADG,IAC7B,2BAAgC,iCAAvBC,EAAuB,KAAnBC,EAAmB,OACnBoB,EAAUC,EAAW,CAACtB,EAAIC,GAAK/B,EAAMgC,UAAWhC,EAAM4C,QADnC,sBAC7Bd,EAD6B,KACzBC,EADyB,KAE3BD,EAAK,GAAK,GAAaA,GAAMC,EAAK,GAAK,GAAaA,IAEvDd,EAAMa,EAAKC,EAAK,GAAa,EAAWlC,IALb,gCADM,8BASrC,IAAI,IAAI,EAAI,EAAG,EAAI,EAAW,IAC5B,IAAI,IAAI,EAAI,EAAG,EAAI,EAAW,IACzBoB,EAAM,EAAI,EAAI,KAAe,GAASoC,EAAY,CAAC,EAAG,MACvDpC,EAAM,EAAI,EAAI,GAAaqB,MAMrC,SAASc,EAAWX,EAAMT,GAAU,qBACnBS,EADmB,GAC7BX,EAD6B,KACzBC,EADyB,KAElC,OAAOC,GACL,KAAK,EAAG,MACR,KAAK,EAAL,MAAmB,CAACD,GAAKD,GAAhBA,EAAT,KAAaC,EAAb,KAA8B,MAC9B,KAAK,EAAL,MAAmB,EAAED,GAAKC,GAAjBD,EAAT,KAAaC,EAAb,KAA+B,MAC/B,KAAK,EAAL,MAAmB,EAAEA,EAAID,GAAhBA,EAAT,KAAaC,EAAb,KAA8B,MAEhC,MAAO,CAACD,EAAIC,GAGd,SAASoB,EAAUV,EAAMa,GAAO,qBACfb,EADe,GACzBX,EADyB,KACrBC,EADqB,KAI9B,OAFAD,GAAMwB,EAAO,GACbvB,GAAMuB,EAAO,GACN,CAACxB,EAAIC,GAGd,IAAItB,EAAgB,gBAAS,WAC3B,IAAI8C,EAAE,eAAQtC,GACd,GAAG+B,EAAQ3E,MAAM,wBACG2E,EAAQ3E,MAAMwD,OADjB,IACf,2BAAsC,KAA5BY,EAA4B,QAC9Be,EAAML,EAAUC,EAAWX,EAAMO,EAAQ3E,MAAM2D,UAAWgB,EAAQ3E,MAAMuE,QAC3EW,EAAIC,EAAI,GAAKA,EAAI,GAAK,KAAe,IACtCD,EAAIC,EAAI,GAAKA,EAAI,GAAK,GAAajB,IAJxB,+BAOjB,OAAOgB,KAOT,SAASjD,IACP,IAAMV,EAASD,EAAQG,EAAgBzB,OACpC,GAAKuB,EAAOO,sBACbP,EAAOG,aAAaH,EAAOO,qBAAqB6B,UAAYpC,EAAOG,aAAaH,EAAOO,qBAAqB6B,SAAW,GAAK,EACzHgB,EAAQ3E,QACT2E,EAAQ3E,MAAM2D,SAAWpC,EAAOG,aAAaH,EAAOO,qBAAqB6B,WAS/E,SAASqB,EAAYG,GACnB,IAAMC,EAAQ,CAAC,EAAG,EAAG,EACnB,EAAG,EAAG,EACN,EAAG,EAAG,GACFC,EAAO,CAAC,EAAG,EAAG,EAClB,EAAG,EAAG,EACN,EAAG,EAAG,GACJC,EAAU,GACe,IAA1B7D,EAAgBzB,OAA0B,IAAXmF,EAAI,IAAuB,IAAXA,EAAI,IACzB,IAA1B1D,EAAgBzB,OAA0B,IAAXmF,EAAI,IAAYA,EAAI,KAAO,EAAY,GAC5C,IAA1B1D,EAAgBzB,OAAemF,EAAI,KAAO,EAAY,GAAKA,EAAI,KAAO,EAAY,GACxD,IAA1B1D,EAAgBzB,OAAemF,EAAI,KAAO,EAAY,GAAgB,IAAXA,EAAI,KAEhEG,IAGF,IAAI,IAAIC,GAAM,EAAGA,GAAM,EAAGA,IAAK,CAC7B,IAAMC,EAAKL,EAAI,GAAKI,EACpB,KAAGC,EAAK,GAAK,GAAaA,GAE1B,IAAI,IAAIC,GAAM,EAAGA,GAAM,EAAGA,IAAK,CAC7B,IAAMC,EAAKP,EAAI,GAAKM,EACpB,KAAGC,EAAK,GAAK,GAAaA,GAA1B,CAEA,IAAMtB,EAAOxB,EAAM8C,EAAKF,EAAK,GAC7B,GAAGrB,EAAWC,GAAM,CAClB,GAAGiB,EAAKI,EAAK,EAAe,GAAVF,EAAK,KAAWlB,EAAsBD,KAAU3C,EAAgBzB,MAChF,OAAO,EACNoF,EAAMK,EAAK,EAAe,GAAVF,EAAK,KAAWlB,EAAsBD,KAAU3C,EAAgBzB,OACjFsF,OAIR,QAASA,EAGX,SAAS9C,EAAUH,EAAG5E,GACpB,0CACIA,EAAI,GAAK,GADb,oBACgD,GAArBmG,KAAKC,MAAMpG,EAAI,IAD1C,gCAEI0G,EAAW9B,GAAKf,EAAQ+C,EAAsBhC,IAAIN,MAClDM,IAAM4B,EAAY,UAAY5B,IAAM6B,EAAU,UAAY,SAGhE,SAAS5B,EAAUD,GACjB,MAAO,CAACsD,MAAOxB,EAAW9B,IAa5B,SAASI,EAAShF,GAChB,IAAM8D,EAASD,EAAQG,EAAgBzB,OACvC,GAAGuB,EAAOO,oBAAsB,EAE9B,OADA8D,QAAQC,IAAI,2BACL,EAJU,QAMN,CAACpI,EAAI,EAAWmG,KAAKC,MAAMpG,EAAI,IAAvC8F,EANc,KAMXD,EANW,KASbwC,EAAY,CAAC,EAAE,EAAE,GAAI,CAAC,GAAG,GAAI,CAAC,EAAE,GAAI,CAAC,EAAE,IACzCnE,EAAQJ,EAAOG,aAAaH,EAAOO,qBACnCiE,GAAe,EAXA,iBAYCpE,EAAM6B,OAZP,IAYnB,2BAAgC,iCAAvBC,EAAuB,KAAnBC,EAAmB,OACnBoB,EAAUC,EAAW,CAACtB,EAAIC,GAAK/B,EAAMgC,UAAW,CAACJ,EAAGD,IADjC,sBAI9B,GAHCG,EAD6B,KACzBC,EADyB,KAI3BD,EAAK,GAAK,GAAaA,GAAMC,EAAK,GAAK,GAAaA,EACrD,OAAO,EAIT,GAFGsB,EAAY,CAACvB,EAAIC,MAClBqC,GAAe,GACd5B,EAAWvB,EAAMa,EAAKC,EAAK,IAE5B,OADAkC,QAAQC,IAAR,qFAA0FpC,EAA1F,YAAgGC,KACzF,EAXqB,uBAaRoC,GAbQ,IAa9B,2BAAgC,KAAtBE,EAAsB,QACxBN,EAAKjC,EAAKuC,EAAS,GACnBR,EAAK9B,EAAKsC,EAAS,GACzB,KAAGN,EAAK,GAAK,GAAaA,GAAMF,EAAK,GAAK,GAAaA,GAAvD,CAEA,IAAMpB,EAAOxB,EAAM8C,EAAKF,EAAK,GAC7B,GAAGrB,EAAWC,IAASC,EAAsBD,KAAU3C,EAAgBzB,MAErE,OADA4F,QAAQC,IAAR,oFAAyFpC,EAAzF,YAA+FC,EAA/F,gBAAyGgC,EAAzG,YAA+GF,KACxG,IArBmB,gCAZb,8BAsCnB,OAAIO,GAKJxE,EAAOqD,OAAO3G,KAAK,CACjBsG,OAAQ,CAAChB,EAAGD,GACZE,MAAOjC,EAAOG,aAAaH,EAAOO,qBAAqB0B,MACvDG,SAAUpC,EAAOG,aAAaH,EAAOO,qBAAqB6B,WAE5DpC,EAAOG,aAAa7C,OAAO0C,EAAOO,oBAAqB,GACpDP,EAAOG,aAAa/D,QAAU4D,EAAOO,sBACtCP,EAAOO,oBAAsBP,EAAOG,aAAa/D,OAAS,GAC5D8D,EAAgBzB,OAASyB,EAAgBzB,MAAQ,GAAK,EACtDqD,KACO,IAdLuC,QAAQC,IAAI,4FACL,GAgBX,SAASnD,EAAajF,GACpB,IAAM8D,EAASD,EAAQG,EAAgBzB,OACvC,GAAGuB,EAAOO,oBAAsB,EAC9B6C,EAAQ3E,MAAQ,SACd,OACW,CAACvC,EAAI,EAAWmG,KAAKC,MAAMpG,EAAI,IAAvC8F,EADH,KACMD,EADN,KAEFqB,EAAQ3E,MAAQ,CAACuE,OAAQ,CAAChB,EAAGD,GAAIE,MAAOjC,EAAOG,aAAaH,EAAOO,qBAAqB0B,MACtFG,SAAUpC,EAAOG,aAAaH,EAAOO,qBAAqB6B,WAKhE,SAASzB,IACP,IAAMX,EAASD,EAAQG,EAAgBzB,OACjCiG,EAAarD,EAAM0B,KAAI,SAACjC,EAAG5E,GAAJ,MAAU,CAAC4E,EAAG5E,MAAIyI,QAAO,SAACC,GAAD,OAAUA,EAAK,GAAKlC,KAC1E,GAAG,EAAIgC,EAAWtI,QAAU,EAAI4D,EAAOG,aAAa/D,OAClD,IAAI,IAAIyI,EAAW,EAAGA,EAAW,IAAKA,IAAW,CAC/C,IAAMC,EAASzC,KAAKC,MAAMD,KAAK0C,SAAWL,EAAWtI,QAC/C4I,EAAaN,EAAWI,GAAQ,GAFS,EAG9B,CAACE,EAAa,EAAW3C,KAAKC,MAAM0C,EAAa,IAA3DC,EAHwC,KAGpCC,EAHoC,KAIzCC,EAAc9C,KAAKC,MAAMD,KAAK0C,SAAW/E,EAAOG,aAAa/D,QAC7DgG,EAAWC,KAAKC,MAAsB,EAAhBD,KAAK0C,UACjC/E,EAAOO,oBAAsB4E,EAE7B,IADA,IAAMlD,EAAQjC,EAAOG,aAAagF,GAAalD,MACvCmD,EAAU,EAAGA,EAAUnD,EAAM7F,OAAQgJ,IAAU,CACrD,IAAMC,EAAa7B,EAAWvB,EAAMmD,GAAUhD,GAC9C,GAAGlB,EAAS+D,EAAKI,EAAW,IAAMH,EAAKG,EAAW,IAAM,GACtD,OAAO,GAIf,OAAO,EAGT,SAASzE,IACPV,EAAgBzB,OAASyB,EAAgBzB,MAAQ,GAAK,EACtDqD,IAKF,OA3GA,gBAAU,eAyGVA,IAEO,CACLT,QACAR,gBACAH,SACAZ,YACAa,YACAC,OACAK,YACAF,YACAG,WACAT,eAAgB,SAACT,EAAQK,GAAT,OAAiBL,EAAOO,oBAAsBF,GAC9DN,UACAG,kBACAoF,aAAc,gBAAS,kBAAMvF,EAAQG,EAAgBzB,UACrD0C,kB,UGrVN,EAAOoB,OAAS,EAChB,EAAOgD,UAAY,kBAEJ,QJEA,GACbvH,KAAM,MACNkF,WAAY,CACVsC,c,UKRJ,EAAOjD,OAAS,EAED,QCJfkD,eAAUC,GAAKC,MAAM,S,oCCHrB,W,oCCAA,W,mECAAhI,EAAOD,QAAU,IAA0B,yB","file":"js/app.d570d2d9.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export { default } from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./WebBrokus.vue?vue&type=style&index=0&id=47b0ace2&scoped=true&lang=css\"; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./WebBrokus.vue?vue&type=style&index=0&id=47b0ace2&scoped=true&lang=css\"","<template>\n  <img alt=\"Vue logo\" src=\"./assets/logo.png\">\n  <web-brokus/>\n  <hr>\n  Powered by <a href=\"https://v3.vuejs.org/\">Vue.js</a>\n</template>\n\n<script>\nimport WebBrokus from './components/WebBrokus.vue'\n\nexport default {\n  name: 'App',\n  components: {\n    WebBrokus\n  }\n}\n</script>\n\n<style>\n#app {\n  font-family: Avenir, Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-align: center;\n  color: #2c3e50;\n  margin-top: 60px;\n}\n</style>\n","<template>\n  <div>\n    <input type=\"button\" @click=\"resetGame\" value=\"Reset Game\">\n  </div>\n  <div v-for=\"(player, playerIdx) in players\" :key=\"playerIdx\" :class=\"{playerFrame: true, inactive: playerIdx !== activePlayerIdx}\">\n    Player {{playerIdx+1}} Pieces:\n    <BlockPreview v-for=\"(block, idx) in player.blockOptions\" :key=\"idx\" :block=\"block\"\n      :selected=\"player.selectedBlockOption === idx\" :color=\"player.color\"\n      @click=\"previewClicked(player, idx)\"/>\n  </div>\n  <div>\n    <input type=\"button\" @click=\"rotate\" value=\"Rotate\">\n    <input type=\"button\" @click=\"randomTry\" value=\"Random try\">\n    <input type=\"button\" @click=\"pass\" value=\"Pass\">\n  </div>\n  <div class=\"hello\">\n    <div class=\"outerFrame\">\n      <div v-for=\"(v, i) in computedBoard\" :key=\"i\">\n        <div :class=\"{cell: true, ...cellClass(v, i)}\" :style=\"cellStyle(v, i)\" @click=\"tryPlace(i)\"\n          @mouseenter=\"previewPiece(i)\">\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { ref, onMounted, reactive, computed } from 'vue';\nimport BlockPreview from './BlockPreview';\nconst boardSize = 20;\nconst shapes = [\n  [[0,0]], // Monomino\n  [[0,0], [0,1]], // Dominoes\n  [[0,0], [1,0]],\n  [[0,0], [0,1], [0,2]], // Trominoes\n  [[0,0], [0,1], [1,0]],\n  [[0,0], [0,1], [1,1]],\n  [[0,0], [0,1], [0,2], [0,3]], // Tetrominoes\n  [[0,0], [0,1], [0,2], [1,2]],\n  [[0,0], [0,1], [0,2], [1,1]],\n  [[0,0], [0,1], [1,1], [1,2]],\n  [[0,0], [1,0], [1,1], [2,1]],\n  [[0,0], [1,0], [0,1], [1,1]],\n  [[0,0], [1,0], [2,0], [2,1], [3,0]], // Pentominoes\n  [[0,0], [1,0], [2,0], [3,0], [4,0]],\n  [[0,0], [1,0], [2,0], [3,0], [1,1]],\n  [[0,0], [1,0], [0,1], [1,1], [2,1]],\n];\n\nconst Empty = 0;\nconst Occupied = 4;\nconst OccupiedMask = 0x3;\nconst Candidate = 8;\nconst Preview = 16;\n\nfunction isOccupied(cell){\n  return cell & Occupied;\n}\n\n/// Get the id of the player that placed a block to that cell\nfunction getCellOccupiedPlayer(cell){\n  if(!isOccupied(cell))\n    throw \"The cell must be occupied\";\n  return cell & OccupiedMask;\n}\n\nclass Player{\n  blocks = [];\n  blockOptions = reactive(shapes.map(shape => ({origin: [0, 0], rotation: 0, shape})));\n  selectedBlockOption = ref(0);\n  constructor(color){\n    this.color = color;\n  }\n}\n\nexport default {\n  name: 'WebBrokus',\n  components: { BlockPreview },\n\n  setup(){\n    let board = reactive(new Array(boardSize * boardSize));\n    let players = reactive([\"#ff7f7f\", \"#ffff00\", \"#00ff00\", \"#7f7fff\"].map(color => new Player(color)));\n    let activePlayerIdx = ref(0);\n    let preview = ref(null);\n\n    // for(let idx = 0; idx < shapes.length; idx++){\n    //   const shape = shapes[idx];\n    //   const xi = (idx * 5) % boardSize;\n    //   const yi = Math.floor((idx * 5) / boardSize) * 5;\n    //   blocks.push({\n    //     origin: [xi, yi],\n    //     shape: shift(shape, [xi, yi])\n    //   });\n    // }\n\n    function resetGame() {\n      for(let player of players){\n        player.blocks.length = 0;\n        player.blockOptions.length = 0;\n        shapes.forEach(shape => player.blockOptions.push({origin: [0, 0], rotation: 0, shape}));\n        player.selectedBlockOption = 0;\n      }\n      updateBoard();\n    }\n\n    function updateBoard() {\n      for(let y = 0; y < boardSize; y++){\n        for(let x = 0; x < boardSize; x++){\n          board[x + y * boardSize] = Empty;\n        }\n      }\n\n      players.forEach((player, playerIdx) => {\n        for(let block of player.blocks){\n          for(let [xi, yi] of block.shape){\n            [xi, yi] = shiftCell(rotateCell([xi, yi], block.rotation), block.origin);\n            if(xi < 0 || boardSize <= xi || yi < 0 || boardSize <= yi)\n              continue;\n            board[xi + yi * boardSize] = Occupied | playerIdx;\n          }\n        }\n        for(let y = 0; y < boardSize; y++){\n          for(let x = 0; x < boardSize; x++){\n            if(board[x + y * boardSize] === Empty && isPlaceable([x, y]))\n              board[x + y * boardSize] = Candidate;\n          }\n        }\n      });\n    }\n\n    function rotateCell(cell, rotation) {\n      let [xi, yi] = cell;\n      switch(rotation){\n        case 0: break;\n        case 1: [xi, yi] = [yi, -xi]; break;\n        case 2: [xi, yi] = [-xi, -yi]; break;\n        case 3: [xi, yi] = [-yi, xi]; break;\n      }\n      return [xi, yi];\n    }\n\n    function shiftCell(cell, offset){\n      let [xi, yi] = cell;\n      xi += offset[0];\n      yi += offset[1];\n      return [xi, yi];\n    }\n\n    let computedBoard = computed(() => {\n      let ret = [...board];\n      if(preview.value){\n        for(const cell of preview.value.shape){\n          const pos = shiftCell(rotateCell(cell, preview.value.rotation), preview.value.origin);\n          if(ret[pos[0] + pos[1] * boardSize] === Empty)\n            ret[pos[0] + pos[1] * boardSize] = Preview;\n        }\n      }\n      return ret;\n    });\n\n    // function rotateBlock(block, center=[0,0]){\n    //   return block.map(cell => [cell[1] + center[0], -cell[0] + center[1]]);\n    // }\n\n    function rotate(){\n      const player = players[activePlayerIdx.value];\n      if(0 <= player.selectedBlockOption){\n        player.blockOptions[player.selectedBlockOption].rotation = (player.blockOptions[player.selectedBlockOption].rotation + 1) % 4;\n        if(preview.value)\n          preview.value.rotation = player.blockOptions[player.selectedBlockOption].rotation;\n      }\n      // rotateBlock(blockOptions[player.selectedBlockOption].shape, [2,2]);\n    }\n\n    // function shift(block, offset){\n    //   return block.map(cell => [cell[0] + offset[0], cell[1] + offset[1]]);\n    // }\n\n    function isPlaceable(pos){\n      const allow = [1, 0, 1,\n        0, 0, 0,\n        1, 0, 1];\n      const deny = [0, 1, 0,\n        1, 1, 1,\n        0, 1, 0];\n      let allowed = 0;\n      if(activePlayerIdx.value === 0 && pos[0] === 0 && pos[1] === 0 ||\n         activePlayerIdx.value === 1 && pos[0] === 0 && pos[1] === boardSize - 1 ||\n         activePlayerIdx.value === 2 && pos[0] === boardSize - 1 && pos[1] === boardSize - 1 ||\n         activePlayerIdx.value === 3 && pos[0] === boardSize - 1 && pos[1] === 0)\n      {\n        allowed++;\n      }\n\n      for(let dy = -1; dy <= 1; dy++){\n        const yj = pos[1] + dy;\n        if(yj < 0 || boardSize <= yj)\n          continue;\n        for(let dx = -1; dx <= 1; dx++){\n          const xj = pos[0] + dx;\n          if(xj < 0 || boardSize <= xj)\n            continue;\n          const cell = board[xj + yj * boardSize];\n          if(isOccupied(cell)){\n            if(deny[dx + 1 + (dy + 1) * 3] && getCellOccupiedPlayer(cell) === activePlayerIdx.value)\n              return false;\n            if(allow[dx + 1 + (dy + 1) * 3] && getCellOccupiedPlayer(cell) === activePlayerIdx.value)\n              allowed++;\n          }\n        }\n      }\n      return !!allowed;\n    }\n\n    function cellStyle(v, i) {\n      return `position: absolute; left: ${\n          i % 20 * 32}px; top: ${Math.floor(i / 20) * 32}px; background-color:${\n          isOccupied(v) ? players[getCellOccupiedPlayer(v)].color :\n          v === Candidate ? \"#7f7fff\" : v === Preview ? \"#7fff7f\" : \"white\"}`;\n    }\n\n    function cellClass(v) {\n      return {ridge: isOccupied(v)};\n    }\n\n    onMounted(() => {\n    //   setInterval(() => {\n    //     blocks = blocks.map(block => ({\n    //       origin: block.origin,\n    //       shape: rotate(block.shape, block.origin)\n    //     }));\n    //     updateBoard();\n    //   }, 200);\n    })\n\n    function tryPlace(i) {\n      const player = players[activePlayerIdx.value];\n      if(player.selectedBlockOption < 0){\n        console.log(\"Block is not selected!\");\n        return false;\n      }\n      let [x, y] = [i % boardSize, Math.floor(i / boardSize)];\n\n      // Check no block will touch new block\n      const neighbors = [[-1,0], [0,-1], [1,0], [0,1]];\n      let block = player.blockOptions[player.selectedBlockOption];\n      let anyPlaceable = false;\n      for(let [xi, yi] of block.shape){\n        [xi, yi] = shiftCell(rotateCell([xi, yi], block.rotation), [x, y]);\n\n        // If any of the cell consisting of the block is outside the board, it cannot be placed.\n        if(xi < 0 || boardSize <= xi || yi < 0 || boardSize <= yi){\n          return false;\n        }\n        if(isPlaceable([xi, yi]))\n          anyPlaceable = true;\n        if(isOccupied(board[xi + yi * boardSize])){\n          console.log(`Cannot place there because it will be colliding to another player's block: ${xi},${yi}`);\n          return false;\n        }\n        for(const neighbor of neighbors){\n          const xj = xi + neighbor[0];\n          const yj = yi + neighbor[1];\n          if(xj < 0 || boardSize <= xj || yj < 0 || boardSize <= yj)\n            continue;\n          const cell = board[xj + yj * boardSize];\n          if(isOccupied(cell) && getCellOccupiedPlayer(cell) === activePlayerIdx.value){\n            console.log(`Cannot place there because it will be touching another block of yourself: ${xi},${yi} and ${xj},${yj}`);\n            return false;\n          }\n        }\n      }\n\n      if(!anyPlaceable){\n        console.log(\"Cannot place there because it will not be touching another block with a corner of yours\");\n        return false;\n      }\n\n      player.blocks.push({\n        origin: [x, y],\n        shape: player.blockOptions[player.selectedBlockOption].shape,\n        rotation: player.blockOptions[player.selectedBlockOption].rotation,\n      });\n      player.blockOptions.splice(player.selectedBlockOption, 1);\n      if(player.blockOptions.length <= player.selectedBlockOption)\n        player.selectedBlockOption = player.blockOptions.length - 1;\n      activePlayerIdx.value = (activePlayerIdx.value + 1) % 4;\n      updateBoard();\n      return true;\n    }\n\n    function previewPiece(i){\n      const player = players[activePlayerIdx.value];\n      if(player.selectedBlockOption < 0)\n        preview.value = null;\n      else{\n        let [x, y] = [i % boardSize, Math.floor(i / boardSize)];\n        preview.value = {origin: [x, y], shape: player.blockOptions[player.selectedBlockOption].shape,\n          rotation: player.blockOptions[player.selectedBlockOption].rotation,\n        };\n      }\n    }\n\n    function randomTry(){\n      const player = players[activePlayerIdx.value];\n      const candidates = board.map((v, i) => [v, i]).filter((item) => item[0] & Candidate);\n      if(0 < candidates.length && 0 < player.blockOptions.length){\n        for(let tryCount = 0; tryCount < 100; tryCount++){\n          const choice = Math.floor(Math.random() * candidates.length);\n          const chosenCell = candidates[choice][1];\n          const [cx, cy] = [chosenCell % boardSize, Math.floor(chosenCell / boardSize)];\n          const pieceChoice = Math.floor(Math.random() * player.blockOptions.length);\n          const rotation = Math.floor(Math.random() * 4);\n          player.selectedBlockOption = pieceChoice;\n          const shape = player.blockOptions[pieceChoice].shape;\n          for(let cellIdx = 0; cellIdx < shape.length; cellIdx++){\n            const cellOffset = rotateCell(shape[cellIdx], rotation);\n            if(tryPlace(cx - cellOffset[0] + (cy - cellOffset[1]) * boardSize))\n              return true;\n          }\n        }\n      }\n      return false;\n    }\n\n    function pass(){\n      activePlayerIdx.value = (activePlayerIdx.value + 1) % 4;\n      updateBoard();\n    }\n\n    updateBoard();\n\n    return {\n      board,\n      computedBoard,\n      rotate,\n      resetGame,\n      randomTry,\n      pass,\n      cellStyle,\n      cellClass,\n      tryPlace,\n      previewClicked: (player, idx) => player.selectedBlockOption = idx,\n      players,\n      activePlayerIdx,\n      activePlayer: computed(() => players[activePlayerIdx.value]),\n      previewPiece,\n    }\n  },\n}\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\nh3 {\n  margin: 40px 0 0;\n}\nul {\n  list-style-type: none;\n  padding: 0;\n}\nli {\n  display: inline-block;\n  margin: 0 10px;\n}\na {\n  color: #42b983;\n}\n.outerFrame {\n  position: relative;\n  left: 320px;\n  margin-left: -320px;\n  right: 0px;\n  width: 640px;\n  height: 640px;\n  border: solid 1px red;\n  background-color: white;\n}\n.playerFrame {\n  border: 1px solid black;\n}\n.inactive {\n  background-color: #afafaf;\n}\n.cell {\n  border: solid 1px black;\n  width: 32px;\n  height: 32px;\n}\n.ridge {\n  border: ridge 4px;\n  border-radius: 4px;\n  width: 24px;\n  height: 24px;\n}\n</style>\n","<template>\n  <div :class=\"{outerFramePreview: true, selected}\" @click=\"$emit('click')\">\n    <div v-for=\"(v, i) in board\" :key=\"i\"\n      class=\"cell\" :style=\"cellStyle(v, i)\">\n    </div>\n  </div>\n</template>\n\n<script>\nimport { reactive, watchEffect } from 'vue';\nconst boardSize = 5;\n\nconst Empty = 0;\nconst Occupied = 1;\n// const Candidate = 2;\n\nexport default {\n  name: 'BlockPreview',\n  props: {\n    block: Object,\n    selected: Boolean,\n    color: String,\n  },\n\n  setup(props){\n    let board = reactive(new Array(boardSize * boardSize));\n\n    // for(let idx = 0; idx < shapes.length; idx++){\n    //   const shape = shapes[idx];\n    //   const xi = (idx * 5) % boardSize;\n    //   const yi = Math.floor((idx * 5) / boardSize) * 5;\n    //   blocks.push({\n    //     origin: [xi, yi],\n    //     shape: shift(shape, [xi, yi])\n    //   });\n    // }\n\n    function updateBoard() {\n      for(let y = 0; y < boardSize; y++){\n        for(let x = 0; x < boardSize; x++){\n          board[x + y * boardSize] = Empty;\n        }\n      }\n\n      for(let [xi, yi] of props.block.shape){\n        switch(props.block.rotation){\n          case 0: break;\n          case 1: [xi, yi] = [yi, boardSize - xi - 1]; break;\n          case 2: [xi, yi] = [boardSize - xi - 1, boardSize - yi - 1]; break;\n          case 3: [xi, yi] = [boardSize - yi - 1, xi]; break;\n        }\n        if(xi < 0 || boardSize <= xi || yi < 0 || boardSize <= yi)\n          continue;\n        board[xi + yi * boardSize] = Occupied;\n      }\n    }\n\n    function cellStyle(v, i) {\n      return `position: absolute; left: ${\n          i % boardSize * 6}px; top: ${Math.floor(i / boardSize) * 6}px; background-color:${\n          v === 1 ? props.color : v === 2 ? \"#7f7fff\" : \"white\"}`;\n    }\n\n    watchEffect(updateBoard);\n\n    return {\n      board,\n      cellStyle,\n      // onClick: () => this.$emit(\"click\"),\n    }\n  },\n}\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style >\nh3 {\n  margin: 40px 0 0;\n}\nul {\n  list-style-type: none;\n  padding: 0;\n}\nli {\n  display: inline-block;\n  margin: 0 10px;\n}\na {\n  color: #42b983;\n}\n.outerFramePreview {\n  position: relative;\n  display: inline-block;\n  right: 0px;\n  width: 30px;\n  height: 30px;\n  border: solid 1px red;\n  padding: 1px;\n  margin: 4px;\n  background-color: white;\n}\n.selected {\n  border: solid 2px blue;\n}\n.cell {\n  border: solid 1px #7f7f7f;\n  width: 6px;\n  height: 6px;\n}\n</style>\n","import { render } from \"./BlockPreview.vue?vue&type=template&id=523a3823&bindings={\\\"block\\\":\\\"props\\\",\\\"selected\\\":\\\"props\\\",\\\"color\\\":\\\"props\\\",\\\"board\\\":\\\"setup\\\",\\\"cellStyle\\\":\\\"setup\\\"}\"\nimport script from \"./BlockPreview.vue?vue&type=script&lang=js\"\nexport * from \"./BlockPreview.vue?vue&type=script&lang=js\"\n\nimport \"./BlockPreview.vue?vue&type=style&index=0&lang=css\"\nscript.render = render\n\nexport default script","import { render } from \"./WebBrokus.vue?vue&type=template&id=47b0ace2&scoped=true&bindings={\\\"board\\\":\\\"setup\\\",\\\"computedBoard\\\":\\\"setup\\\",\\\"rotate\\\":\\\"setup\\\",\\\"resetGame\\\":\\\"setup\\\",\\\"randomTry\\\":\\\"setup\\\",\\\"pass\\\":\\\"setup\\\",\\\"cellStyle\\\":\\\"setup\\\",\\\"cellClass\\\":\\\"setup\\\",\\\"tryPlace\\\":\\\"setup\\\",\\\"previewClicked\\\":\\\"setup\\\",\\\"players\\\":\\\"setup\\\",\\\"activePlayerIdx\\\":\\\"setup\\\",\\\"activePlayer\\\":\\\"setup\\\",\\\"previewPiece\\\":\\\"setup\\\"}\"\nimport script from \"./WebBrokus.vue?vue&type=script&lang=js\"\nexport * from \"./WebBrokus.vue?vue&type=script&lang=js\"\n\nimport \"./WebBrokus.vue?vue&type=style&index=0&id=47b0ace2&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-47b0ace2\"\n\nexport default script","import { render } from \"./App.vue?vue&type=template&id=86c9026a&bindings={}\"\nimport script from \"./App.vue?vue&type=script&lang=js\"\nexport * from \"./App.vue?vue&type=script&lang=js\"\n\nimport \"./App.vue?vue&type=style&index=0&lang=css\"\nscript.render = render\n\nexport default script","import { createApp } from 'vue'\nimport App from './App.vue'\n\ncreateApp(App).mount('#app')\n","export { default } from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/vue-loader-v16/dist/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./App.vue?vue&type=style&index=0&lang=css\"; export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/vue-loader-v16/dist/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./App.vue?vue&type=style&index=0&lang=css\"","export { default } from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./BlockPreview.vue?vue&type=style&index=0&lang=css\"; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./BlockPreview.vue?vue&type=style&index=0&lang=css\"","module.exports = __webpack_public_path__ + \"img/logo.82b9c7a5.png\";"],"sourceRoot":""}