(function(e){function t(t){for(var o,a,l=t[0],i=t[1],u=t[2],f=0,s=[];f<l.length;f++)a=l[f],Object.prototype.hasOwnProperty.call(c,a)&&c[a]&&s.push(c[a][0]),c[a]=0;for(o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o]);b&&b(t);while(s.length)s.shift()();return r.push.apply(r,u||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],o=!0,l=1;l<n.length;l++){var i=n[l];0!==c[i]&&(o=!1)}o&&(r.splice(t--,1),e=a(a.s=n[0]))}return e}var o={},c={app:0},r=[];function a(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=o,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)a.d(n,o,function(t){return e[t]}.bind(null,o));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],i=l.push.bind(l);l.push=t,l=l.slice();for(var u=0;u<l.length;u++)t(l[u]);var b=i;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},2939:function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("7a23"),c={class:"appContainer"},r=Object(o["f"])("h1",null,"Web-blokus",-1),a=Object(o["f"])("hr",null,null,-1),l=Object(o["e"])(" Powered by "),i=Object(o["f"])("a",{href:"https://v3.vuejs.org/"},"Vue.js",-1),u=Object(o["f"])("br",null,null,-1),b=Object(o["e"])(" Source on "),f=Object(o["f"])("a",{href:"https://github.com/msakuta/web-blokus"},"GitHub",-1),s=Object(o["e"])(". ");function p(e,t,n,p,O,v){var d=Object(o["n"])("web-brokus");return Object(o["h"])(),Object(o["d"])("div",c,[r,Object(o["f"])(d),a,l,i,u,b,f,s])}var O=n("5530"),v=Object(o["s"])("data-v-d98a48e4");Object(o["j"])("data-v-d98a48e4");var d={style:{display:"inline-block"}},j=Object(o["f"])("br",null,null,-1),h=Object(o["e"])("Auto"),k=Object(o["f"])("br",null,null,-1),y=Object(o["e"])(" Pieces: "),g={class:"hello"},m={class:"outerFrame"};Object(o["i"])();var w=v((function(e,t,n,c,r,a){var l=Object(o["n"])("BlockPreview");return Object(o["h"])(),Object(o["d"])(o["a"],null,[Object(o["f"])("div",null,[Object(o["f"])("input",{type:"button",onClick:t[1]||(t[1]=function(){return c.resetGame.apply(c,arguments)}),value:"Reset Game"})]),(Object(o["h"])(!0),Object(o["d"])(o["a"],null,Object(o["m"])(c.players,(function(e,t){return Object(o["h"])(),Object(o["d"])("div",{key:t,class:{playerFrame:!0,inactive:t!==c.activePlayerIdx}},[Object(o["f"])("span",d,[Object(o["e"])("Player "+Object(o["o"])(t+1),1),j,Object(o["f"])("label",null,[Object(o["r"])(Object(o["f"])("input",{type:"checkbox","onUpdate:modelValue":function(t){return e.auto=t}},null,8,["onUpdate:modelValue"]),[[o["p"],e.auto]]),h]),k,y]),(Object(o["h"])(!0),Object(o["d"])(o["a"],null,Object(o["m"])(e.blockOptions,(function(n,r){return Object(o["h"])(),Object(o["d"])(l,{key:r,block:n,selected:t===c.activePlayerIdx&&e.selectedBlockOption===r,color:e.color,onClick:function(t){return c.previewClicked(e,r)}},null,8,["block","selected","color","onClick"])})),128))],2)})),128)),Object(o["f"])("div",null,[Object(o["f"])("input",{type:"button",onClick:t[2]||(t[2]=function(){return c.rotate.apply(c,arguments)}),value:"Rotate"}),Object(o["f"])("input",{type:"button",onClick:t[3]||(t[3]=function(){return c.randomTry.apply(c,arguments)}),value:"Random try"}),Object(o["f"])("input",{type:"button",onClick:t[4]||(t[4]=function(){return c.pass.apply(c,arguments)}),value:"Pass"})]),Object(o["f"])("div",g,[Object(o["f"])("div",m,[(Object(o["h"])(!0),Object(o["d"])(o["a"],null,Object(o["m"])(c.computedBoard,(function(e,t){return Object(o["h"])(),Object(o["d"])("div",{key:t},[Object(o["f"])("div",{class:Object(O["a"])({cell:!0},c.cellClass(e,t)),style:c.cellStyle(e,t),onClick:function(e){return c.tryPlace(t)},onMouseenter:function(e){return c.previewPiece(t)}},null,46,["onClick","onMouseenter"])])})),128))])])],64)})),B=(n("99af"),n("4de4"),n("4160"),n("d81d"),n("a434"),n("159b"),n("96cf"),n("1da1")),P=n("2909"),C=n("3835"),M=n("b85c"),x=n("d4ec"),S=n("ade3");function _(e,t,n,c,r,a){return Object(o["h"])(),Object(o["d"])("div",{class:{outerFramePreview:!0,selected:n.selected},onClick:t[1]||(t[1]=function(t){return e.$emit("click")})},[(Object(o["h"])(!0),Object(o["d"])(o["a"],null,Object(o["m"])(c.board,(function(e,t){return Object(o["h"])(),Object(o["d"])("div",{key:t,class:"cell",style:c.cellStyle(e,t)},null,4)})),128))],2)}var R=5,T=0,A=1,G={name:"BlockPreview",props:{block:Object,selected:Boolean,color:String},setup:function(e){var t=Object(o["k"])(new Array(R*R));function n(){for(var n=0;n<R;n++)for(var o=0;o<R;o++)t[o+n*R]=T;var c,r=Object(M["a"])(e.block.shape);try{for(r.s();!(c=r.n()).done;){var a=Object(C["a"])(c.value,2),l=a[0],i=a[1];switch(e.block.rotation){case 0:break;case 1:var u=[i,R-l-1];l=u[0],i=u[1];break;case 2:var b=[R-l-1,R-i-1];l=b[0],i=b[1];break;case 3:var f=[R-i-1,l];l=f[0],i=f[1];break}l<0||R<=l||i<0||R<=i||(t[l+i*R]=A)}}catch(s){r.e(s)}finally{r.f()}}function c(t,n){return"position: absolute; left: ".concat(n%R*6,"px; top: ").concat(6*Math.floor(n/R),"px; background-color:").concat(1===t?e.color:2===t?"#7f7fff":"white")}return Object(o["q"])(n),{board:t,cellStyle:c}}};n("7b8d");G.render=_;var I=G,F=20,V=[[[0,0]],[[0,0],[0,1]],[[0,0],[1,0]],[[0,0],[0,1],[0,2]],[[0,0],[0,1],[1,0]],[[0,0],[0,1],[1,1]],[[0,0],[0,1],[0,2],[0,3]],[[0,0],[0,1],[0,2],[1,2]],[[0,0],[0,1],[0,2],[1,1]],[[0,0],[0,1],[1,1],[1,2]],[[0,0],[1,0],[1,1],[2,1]],[[0,0],[1,0],[0,1],[1,1]],[[0,0],[1,0],[2,0],[2,1],[3,0]],[[0,0],[1,0],[2,0],[3,0],[4,0]],[[0,0],[1,0],[2,0],[3,0],[1,1]],[[0,0],[1,0],[0,1],[1,1],[2,1]]],W=0,E=4,J=3,U=8,q=16;function H(e){return e&E}function $(e){if(!H(e))throw"The cell must be occupied";return e&J}var z=function e(t){Object(x["a"])(this,e),Object(S["a"])(this,"blocks",[]),Object(S["a"])(this,"blockOptions",Object(o["k"])(V.map((function(e){return{origin:[0,0],rotation:0,shape:e}})))),Object(S["a"])(this,"selectedBlockOption",Object(o["l"])(0)),Object(S["a"])(this,"auto",!1),this.color=t},D={name:"WebBrokus",components:{BlockPreview:I},setup:function(){var e=Object(o["k"])(new Array(F*F)),t=Object(o["k"])(["#ff7f7f","#ffff00","#00ff00","#7f7fff"].map((function(e){return new z(e)}))),n=Object(o["l"])(0),c=Object(o["l"])(null);function r(){var e,n=Object(M["a"])(t);try{var o=function(){var t=e.value;t.blocks.length=0,t.blockOptions.length=0,V.forEach((function(e){return t.blockOptions.push({origin:[0,0],rotation:0,shape:e})})),t.selectedBlockOption=0};for(n.s();!(e=n.n()).done;)o()}catch(c){n.e(c)}finally{n.f()}a()}function a(){for(var n=0;n<F;n++)for(var o=0;o<F;o++)e[o+n*F]=W;t.forEach((function(t,n){var o,c=Object(M["a"])(t.blocks);try{for(c.s();!(o=c.n()).done;){var r,a=o.value,u=Object(M["a"])(a.shape);try{for(u.s();!(r=u.n()).done;){var b=Object(C["a"])(r.value,2),s=b[0],p=b[1],O=i(l([s,p],a.rotation),a.origin),v=Object(C["a"])(O,2);s=v[0],p=v[1],s<0||F<=s||p<0||F<=p||(e[s+p*F]=E|n)}}catch(h){u.e(h)}finally{u.f()}}}catch(h){c.e(h)}finally{c.f()}for(var d=0;d<F;d++)for(var j=0;j<F;j++)e[j+d*F]===W&&f([j,d])&&(e[j+d*F]=U)}))}function l(e,t){var n=Object(C["a"])(e,2),o=n[0],c=n[1];switch(t){case 0:break;case 1:var r=[c,-o];o=r[0],c=r[1];break;case 2:var a=[-o,-c];o=a[0],c=a[1];break;case 3:var l=[-c,o];o=l[0],c=l[1];break}return[o,c]}function i(e,t){var n=Object(C["a"])(e,2),o=n[0],c=n[1];return o+=t[0],c+=t[1],[o,c]}var u=Object(o["b"])((function(){var t=Object(P["a"])(e);if(c.value){var n,o=Object(M["a"])(c.value.shape);try{for(o.s();!(n=o.n()).done;){var r=n.value,a=i(l(r,c.value.rotation),c.value.origin);t[a[0]+a[1]*F]&J||(t[a[0]+a[1]*F]|=q)}}catch(u){o.e(u)}finally{o.f()}}return t}));function b(){var e=t[n.value];0<=e.selectedBlockOption&&(e.blockOptions[e.selectedBlockOption].rotation=(e.blockOptions[e.selectedBlockOption].rotation+1)%4,c.value&&(c.value.rotation=e.blockOptions[e.selectedBlockOption].rotation))}function f(t){var o=[1,0,1,0,0,0,1,0,1],c=[0,1,0,1,1,1,0,1,0],r=0;(0===n.value&&0===t[0]&&0===t[1]||1===n.value&&0===t[0]&&t[1]===F-1||2===n.value&&t[0]===F-1&&t[1]===F-1||3===n.value&&t[0]===F-1&&0===t[1])&&r++;for(var a=-1;a<=1;a++){var l=t[1]+a;if(!(l<0||F<=l))for(var i=-1;i<=1;i++){var u=t[0]+i;if(!(u<0||F<=u)){var b=e[u+l*F];if(H(b)){if(c[i+1+3*(a+1)]&&$(b)===n.value)return!1;o[i+1+3*(a+1)]&&$(b)===n.value&&r++}}}}return!!r}function s(e,n){return"position: absolute; left: ".concat(n%20*32,"px; top: ").concat(32*Math.floor(n/20),"px; background-color:").concat(H(e)?t[$(e)].color:"rgb(".concat(!!(e&q)^!!(e&U)?191:255,", ").concat(e&U?191:255,", ").concat(e&q?191:255,")"))}function p(e){return{ridge:H(e)}}function O(o){var c=t[n.value];if(c.selectedBlockOption<0)return console.log("Block is not selected!"),!1;var r,u=[o%F,Math.floor(o/F)],b=u[0],s=u[1],p=[[-1,0],[0,-1],[1,0],[0,1]],O=c.blockOptions[c.selectedBlockOption],v=!1,d=Object(M["a"])(O.shape);try{for(d.s();!(r=d.n()).done;){var j=Object(C["a"])(r.value,2),k=j[0],y=j[1],g=i(l([k,y],O.rotation),[b,s]),m=Object(C["a"])(g,2);if(k=m[0],y=m[1],k<0||F<=k||y<0||F<=y)return!1;if(f([k,y])&&(v=!0),H(e[k+y*F]))return console.log("Cannot place there because it will be colliding to another player's block: ".concat(k,",").concat(y)),!1;var w,B=Object(M["a"])(p);try{for(B.s();!(w=B.n()).done;){var P=w.value,x=k+P[0],S=y+P[1];if(!(x<0||F<=x||S<0||F<=S)){var _=e[x+S*F];if(H(_)&&$(_)===n.value)return console.log("Cannot place there because it will be touching another block of yourself: ".concat(k,",").concat(y," and ").concat(x,",").concat(S)),!1}}}catch(R){B.e(R)}finally{B.f()}}}catch(R){d.e(R)}finally{d.f()}return v?(c.blocks.push({origin:[b,s],shape:c.blockOptions[c.selectedBlockOption].shape,rotation:c.blockOptions[c.selectedBlockOption].rotation}),c.blockOptions.splice(c.selectedBlockOption,1),c.blockOptions.length<=c.selectedBlockOption&&(c.selectedBlockOption=c.blockOptions.length-1),n.value=(n.value+1)%4,a(),t[n.value].auto&&h(),!0):(console.log("Cannot place there because it will not be touching another block with a corner of yours"),!1)}function v(e){var o=t[n.value];if(o.selectedBlockOption<0)c.value=null;else{var r=[e%F,Math.floor(e/F)],a=r[0],l=r[1];c.value={origin:[a,l],shape:o.blockOptions[o.selectedBlockOption].shape,rotation:o.blockOptions[o.selectedBlockOption].rotation}}}function d(){var o=t[n.value],c=e.map((function(e,t){return[e,t]})).filter((function(e){return e[0]&U}));if(0<c.length&&0<o.blockOptions.length)for(var r=0;r<100;r++){var a=Math.floor(Math.random()*c.length),i=c[a][1],u=[i%F,Math.floor(i/F)],b=u[0],f=u[1],s=Math.floor(Math.random()*o.blockOptions.length),p=Math.floor(4*Math.random());o.selectedBlockOption=s;for(var v=o.blockOptions[s].shape,d=0;d<v.length;d++){var j=l(v[d],p);if(O(b-j[0]+(f-j[1])*F))return!0}}return!1}function j(){n.value=(n.value+1)%4,a(),h()}function h(){t[n.value].auto&&Object(B["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:d()||j();case 1:case"end":return e.stop()}}),e)})))()}return Object(o["g"])((function(){})),a(),{board:e,computedBoard:u,rotate:b,resetGame:r,randomTry:d,pass:j,cellStyle:s,cellClass:p,tryPlace:O,previewClicked:function(e,t){return e.selectedBlockOption=t},players:t,activePlayerIdx:n,activePlayer:Object(o["b"])((function(){return t[n.value]})),previewPiece:v}}};n("9696");D.render=w,D.__scopeId="data-v-d98a48e4";var K=D,L={name:"App",components:{WebBrokus:K}};n("64be");L.render=p;var N=L;Object(o["c"])(N).mount("#app")},"64be":function(e,t,n){"use strict";n("c894")},"7b8d":function(e,t,n){"use strict";n("c951")},9696:function(e,t,n){"use strict";n("2939")},c894:function(e,t,n){},c951:function(e,t,n){}});
//# sourceMappingURL=app.c3203f7d.js.map